Learning unions and user permissions